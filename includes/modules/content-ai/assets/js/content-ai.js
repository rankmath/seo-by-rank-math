!function(){var e={184:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)){if(n.length){var i=a.apply(null,n);i&&e.push(i)}}else if("object"===o)if(n.toString===Object.prototype.toString)for(var c in n)r.call(n,c)&&n[c]&&e.push(c);else e.push(n.toString())}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(n=function(){return a}.apply(t,[]))||(e.exports=n)}()},139:function(e){"use strict";function t(e){return function(){return e}}var n=function(){};n.thatReturns=t,n.thatReturnsFalse=t(!1),n.thatReturnsTrue=t(!0),n.thatReturnsNull=t(null),n.thatReturnsThis=function(){return this},n.thatReturnsArgument=function(e){return e},e.exports=n},759:function(e){"use strict";e.exports=function(e,t,n,r,a,o,i,c){if(!e){var s;if(void 0===t)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,a,o,i,c],u=0;(s=new Error(t.replace(/%s/g,(function(){return l[u++]})))).name="Invariant Violation"}throw s.framesToPop=1,s}}},620:function(e,t,n){"use strict";var r=n(139);e.exports=r},746:function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=c(n(363)),o=c(n(156)),i=c(n(743));function c(e){return e&&e.__esModule?e:{default:e}}var s=void 0;function l(e,t){var n,i,c,u,m,p,h,f,d=[],y={};for(p=0;p<e.length;p++)if("string"!==(m=e[p]).type){if(!t.hasOwnProperty(m.value)||void 0===t[m.value])throw new Error("Invalid interpolation, missing component node: `"+m.value+"`");if("object"!==r(t[m.value]))throw new Error("Invalid interpolation, component node must be a ReactElement or null: `"+m.value+"`","\n> "+s);if("componentClose"===m.type)throw new Error("Missing opening component token: `"+m.value+"`");if("componentOpen"===m.type){n=t[m.value],c=p;break}d.push(t[m.value])}else d.push(m.value);return n&&(u=function(e,t){var n,r,a=t[e],o=0;for(r=e+1;r<t.length;r++)if((n=t[r]).value===a.value){if("componentOpen"===n.type){o++;continue}if("componentClose"===n.type){if(0===o)return r;o--}}throw new Error("Missing closing component token `"+a.value+"`")}(c,e),h=l(e.slice(c+1,u),t),i=a.default.cloneElement(n,{},h),d.push(i),u<e.length-1&&(f=l(e.slice(u+1),t),d=d.concat(f))),1===d.length?d[0]:(d.forEach((function(e,t){e&&(y["interpolation-child-"+t]=e)})),(0,o.default)(y))}t.Z=function(e){var t=e.mixedString,n=e.components,a=e.throwErrors;if(s=t,!n)return t;if("object"!==(void 0===n?"undefined":r(n))){if(a)throw new Error("Interpolation Error: unable to process `"+t+"` because components is not an object");return t}var o=(0,i.default)(t);try{return l(o,n)}catch(e){if(a)throw new Error("Interpolation Error: unable to process `"+t+"` because of error `"+e.message+"`");return t}}},743:function(e){"use strict";function t(e){return e.match(/^\{\{\//)?{type:"componentClose",value:e.replace(/\W/g,"")}:e.match(/\/\}\}$/)?{type:"componentSelfClosing",value:e.replace(/\W/g,"")}:e.match(/^\{\{/)?{type:"componentOpen",value:e.replace(/\W/g,"")}:{type:"string",value:e}}e.exports=function(e){return e.split(/(\{\{\/?\s*\w+\s*\/?\}\})/g).map(t)}},156:function(e,t,n){"use strict";var r=n(363),a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,o=n(139),i=n(759),c=n(620),s="function"==typeof Symbol&&Symbol.iterator;function l(e,t){return e&&"object"==typeof e&&null!=e.key?(n=e.key,r={"=":"=0",":":"=2"},"$"+(""+n).replace(/[=:]/g,(function(e){return r[e]}))):t.toString(36);var n,r}function u(e,t,n,r){var o,c=typeof e;if("undefined"!==c&&"boolean"!==c||(e=null),null===e||"string"===c||"number"===c||"object"===c&&e.$$typeof===a)return n(r,e,""===t?"."+l(e,0):t),1;var m=0,p=""===t?".":t+":";if(Array.isArray(e))for(var h=0;h<e.length;h++)m+=u(o=e[h],p+l(o,h),n,r);else{var f=function(e){var t=e&&(s&&e[s]||e["@@iterator"]);if("function"==typeof t)return t}(e);if(f){0;for(var d,y=f.call(e),k=0;!(d=y.next()).done;)m+=u(o=d.value,p+l(o,k++),n,r)}else if("object"===c){0;var w=""+e;i(!1,"Objects are not valid as a React child (found: %s).%s","[object Object]"===w?"object with keys {"+Object.keys(e).join(", ")+"}":w,"")}}return m}var m=/\/+/g;function p(e){return(""+e).replace(m,"$&/")}var h,f,d=y,y=function(e){var t=this;if(t.instancePool.length){var n=t.instancePool.pop();return t.call(n,e),n}return new t(e)},k=function(e){var t=this;i(e instanceof t,"Trying to release an instance into a pool of a different type."),e.destructor(),t.instancePool.length<t.poolSize&&t.instancePool.push(e)};function w(e,t,n,r){this.result=e,this.keyPrefix=t,this.func=n,this.context=r,this.count=0}function b(e,t,n){var a,i,c=e.result,s=e.keyPrefix,l=e.func,u=e.context,m=l.call(u,t,e.count++);Array.isArray(m)?v(m,c,n,o.thatReturnsArgument):null!=m&&(r.isValidElement(m)&&(a=m,i=s+(!m.key||t&&t.key===m.key?"":p(m.key)+"/")+n,m=r.cloneElement(a,{key:i},void 0!==a.props?a.props.children:void 0)),c.push(m))}function v(e,t,n,r,a){var o="";null!=n&&(o=p(n)+"/");var i=w.getPooled(t,o,r,a);!function(e,t,n){null==e||u(e,"",t,n)}(e,b,i),w.release(i)}w.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},h=function(e,t,n,r){var a=this;if(a.instancePool.length){var o=a.instancePool.pop();return a.call(o,e,t,n,r),o}return new a(e,t,n,r)},(f=w).instancePool=[],f.getPooled=h||d,f.poolSize||(f.poolSize=10),f.release=k;e.exports=function(e){if("object"!=typeof e||!e||Array.isArray(e))return c(!1,"React.addons.createFragment only accepts a single object. Got: %s",e),e;if(r.isValidElement(e))return c(!1,"React.addons.createFragment does not accept a ReactElement without a wrapper object."),e;i(1!==e.nodeType,"React.addons.createFragment(...): Encountered an invalid child; DOM elements are not valid children of React components.");var t=[];for(var n in e)v(e[n],t,n,o.thatReturnsArgument);return t}},363:function(e){"use strict";e.exports=React}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";var e=jQuery,t=n.n(e),r=n(184),a=n.n(r),o=lodash,i=wp.i18n,c=wp.hooks,s=wp.components,l=wp.element,u=wp.plugins,m=wp.editPost,p=wp.data,h=wp.compose,f=wp.apiFetch,d=n.n(f);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=E(e);if(t){var a=E(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _(e)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(c,e);var t,n,r,a=v(c);function c(){var e;return k(this,c),(e=a.apply(this,arguments)).state={score:0},e.setState=e.setState.bind(_(e)),e}return t=c,(n=[{key:"render",value:function(){var e=this;return setTimeout((function(){e.setState({score:e.props.score})}),1e3),wp.element.createElement("div",{className:"rank-math-ca-score"},wp.element.createElement("div",{className:"score-text"},(0,i.__)("Score:","rank-math")," ",this.state.score,wp.element.createElement("span",null," / ",(0,i.__)("100","rank-math"))),wp.element.createElement("div",{className:"score-wrapper"},wp.element.createElement("span",{className:"score-dot",style:{left:((0,o.inRange)(this.state.score,0,5)?5:this.state.score)+"%"}})))}}])&&w(t.prototype,n),r&&w(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(l.Component),C=(0,h.compose)((0,p.withSelect)((function(e){var t=Object.values(e("rank-math").getContentAIScore());return{score:(0,o.round)((0,o.sum)(t)/t.length)}})))(S);function O(e){return 100<e?"bad-fk dark":80<e?"good-fk":50<e?"ok-fk":"bad-fk"}function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},R(e,t)}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var a=I(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return x(this,n)}}function x(e,t){if(t&&("object"===P(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return A(e)}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}var M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}(s,e);var t,n,r,c=T(s);function s(){var e;return j(this,s),(e=c.apply(this,arguments)).state={activeTab:""},e.setState=e.setState.bind(A(e)),e}return t=s,n=[{key:"render",value:function(){return wp.element.createElement("div",{className:"rank-math-ca-recommendations"},this.getRecommendations(this.props.recommendations))}},{key:"getRecommendations",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=[];return(0,o.forEach)(e,(function(e,c){if("total"!==c){var s=(0,o.isUndefined)(e.total)?e:e.total,l=t.getPostStats(c),u=a()(c,{"has-children":!(0,o.isUndefined)(e.total),show:c===t.state.activeTab}),m=t.getScore(c,l,s,n),p=(0,o.ceil)(150*s/100);r.push(wp.element.createElement("div",{className:u+" "+O(m),onClick:function(){return t.setState({activeTab:t.state.activeTab!==c?c:""})},role:"presentation"},wp.element.createElement("h4",null,n?c:(0,o.startCase)(c)),n&&wp.element.createElement("span",null,l," / ",s),!n&&wp.element.createElement(React.Fragment,null,wp.element.createElement("strong",null,l),wp.element.createElement("span",{className:"desc"},(0,i.__)("Use","rank-math")," ",s," ",(0,i.__)("to","rank-math")," ",p)),(0,o.isObject)(e)&&t.getRecommendations(e,!0)))}})),n?wp.element.createElement("div",{className:"submenu"},r):r}},{key:"getPostStats",value:function(e){return(0,o.has)(this.props.postStats,e)?this.props.postStats[e]:0}},{key:"getScore",value:function(e,t,n,r){var a=t===n?100:t/n*100;if(0===n&&t<=2&&(a=100),r)return a>100&&a<=125?100:a;var o=a>80?100:t/n*80;return a>125&&"wordCount"!==e&&(o=0),this.props.updateAiScore(e,o),a>100&&"wordCount"===e||a>100&&a<=125?100:a}}],n&&N(t.prototype,n),r&&N(t,r),Object.defineProperty(t,"prototype",{writable:!1}),s}(l.Component),D=(0,h.compose)((0,p.withSelect)((function(e,t){var n=1518,r=12,a=2,i=5,c=3,s=0,l=0,u=0,m=8,p=19;if(t.hasCredits){var h=t.researcher.getResearch("wordCount"),f=rankMathEditor.assessor.analyzer.defaultAnalyses.contentHasAssets;n=h(t.content),r=(0,o.isUndefined)(f)?0:f.getImages(t.researcher.paper,t.content),a=(0,o.isUndefined)(f)?0:f.getVideos(t.content),i=(t.content.match(/<h2\b[^>]*>(.*?)<\/h2>/g)||[]).length,c=(t.content.match(/<h3\b[^>]*>(.*?)<\/h3>/g)||[]).length,s=(t.content.match(/<h4\b[^>]*>(.*?)<\/h4>/g)||[]).length,l=(t.content.match(/<h5\b[^>]*>(.*?)<\/h5>/g)||[]).length,u=(t.content.match(/<h6\b[^>]*>(.*?)<\/h6>/g)||[]).length;var d=t.researcher.getResearch("getLinkStats")(t.content);m=d.internalTotal,p=d.externalTotal}return{postStats:{wordCount:n,images:r,videos:a,mediaCount:r+a,h2:i,h3:c,h4:s,h5:l,h6:u,headingCount:i+c+s+l+u,internal:m,external:p,linkCount:m+p}}})))(M);function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}var K=["tabId","onClick","children","selected"];function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e,t){return U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},U(e,t)}function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=z(e);if(t){var a=z(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return W(this,n)}}function W(e,t){if(t&&("object"===B(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $(e)}function $(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e){return z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},z(e)}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V(){return V=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},V.apply(this,arguments)}function Q(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var J=function(e){var t=e.tabId,n=e.onClick,r=e.children,a=e.selected,o=Q(e,K);return wp.element.createElement(s.Button,V({role:"tab",tabIndex:a?null:-1,"aria-selected":a,id:t,onClick:n},o),r)},G=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U(e,t)}(c,e);var t,n,r,i=q(c);function c(){var e;F(this,c),H($(e=i.apply(this,arguments)),"handleClick",(function(t){var n=e.props.onSelect,r=void 0===n?o.noop:n;e.setState({selected:t}),r(t)})),H($(e),"onNavigate",(function(e,t){t.click()}));var t=e.props,n=t.tabs,r=t.initialTabName;return e.state={selected:r||(n.length>0?n[0].name:null)},e}return t=c,(n=[{key:"render",value:function(){var e=this,t=this.state.selected,n=this.props,r=n.activeClass,i=void 0===r?"is-active":r,c=n.className,l=n.instanceId,u=n.orientation,m=void 0===u?"horizontal":u,p=n.tabs,h=(0,o.find)(p,{name:t}),f=l+"-"+h.name,d=p.slice(4);return wp.element.createElement("div",{className:c},wp.element.createElement(s.NavigableMenu,{role:"tablist",orientation:m,onNavigate:this.onNavigate,className:"components-tab-panel__tabs "+t},p.slice(0,4).map((function(n){return wp.element.createElement(J,{className:a()("components-tab-panel__tabs-item",n.className,H({},i,n.name===t)),tabId:l+"-"+n.name,"aria-controls":l+"-"+n.name+"-view",selected:n.name===t,key:n.name,onClick:(0,o.partial)(e.handleClick,n.name)},n.title)})),d.map((function(n){return wp.element.createElement(J,{className:a()("components-tab-panel__tabs-item",n.className,H({},i,n.name===t)),tabId:l+"-"+n.name,"aria-controls":l+"-"+n.name+"-view",selected:n.name===t,key:n.name,onClick:(0,o.partial)(e.handleClick,n.name)},n.title)}))),h&&wp.element.createElement("div",{"aria-labelledby":f,role:"tabpanel",id:f+"-view",className:"components-tab-panel__tab-content"},this.props.children(h)))}}])&&L(t.prototype,n),r&&L(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(l.Component),Y=(0,h.withInstanceId)(G),Z=rankMathAnalyzer;function X(e){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X(e)}function ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ne(e,t){return ne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ne(e,t)}function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ie(e);if(t){var a=ie(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ae(this,n)}}function ae(e,t){if(t&&("object"===X(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return oe(e)}function oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ie(e){return ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ie(e)}var ce=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ne(e,t)}(u,e);var t,n,r,c=re(u);function u(){var e;return ee(this,u),(e=c.apply(this,arguments)).state={type:"content",selected:""},e.setState=e.setState.bind(oe(e)),e.initializeClipboard(e.setState),e}return t=u,n=[{key:"initializeClipboard",value:function(e){"function"==typeof ClipboardJS&&this.props.hasCredits&&new ClipboardJS(".rank-math-tooltip strong",{text:function(e){return e.getAttribute("data-key")}}).on("success",(function(){setTimeout((function(){e({selected:""})}),3e3)}))}},{key:"render",value:function(){var e=this;return wp.element.createElement(l.Fragment,null,wp.element.createElement(s.PanelBody,{initialOpen:!0},wp.element.createElement(s.SelectControl,{label:(0,i.__)("Use Keyword in","rank-math"),value:this.state.type,options:[{value:"content",label:(0,i.__)("Content","rank-math")},{value:"heading",label:(0,i.__)("Headings","rank-math")},{value:"title",label:(0,i.__)("SEO Title","rank-math")},{value:"description",label:(0,i.__)("SEO Description","rank-math")}],onChange:function(t){e.setState({type:t})}}),wp.element.createElement("a",{href:"https://rankmath.com/kb/how-to-use-content-ai/?utm_source=Plugin&utm_medium=Sidebar%20Keywords%20KB%20Icon&utm_campaign=WP#keywords",rel:"noreferrer",target:"_blank",id:"rank-math-help-icon",title:(0,i.__)("Know more about Keywords.","rank-math")},"﹖"),wp.element.createElement(React.Fragment,null,wp.element.createElement("span",{className:"components-form-token-field__help"},(0,i.__)("Click on any keyword to copy it.","rank-math")),wp.element.createElement("br",null),(0,o.includes)(["title","description"],this.state.type)&&wp.element.createElement("span",{className:"components-form-token-field__help"},(0,i.__)("Please use only one or two keywords from here.","rank-math")),wp.element.createElement("ul",null,this.getKeywords())),this.getRelatedKeywords()))}},{key:"getRelatedKeywords",value:function(){var e=this;if("content"!==this.state.type||(0,o.isEmpty)(this.props.caData.data.related_keywords))return!1;var t=[];return(0,o.forEach)(this.props.caData.data.related_keywords,(function(n){t.push(wp.element.createElement("li",{className:"rank-math-tooltip show",onClick:function(){return e.setState({selected:n})},role:"presentation"},wp.element.createElement("strong",{"data-key":n},n),e.getTooltipContent({keyword:n},!0)))})),wp.element.createElement("div",{className:"rank-math-related-keywords"},wp.element.createElement("h3",null,(0,i.__)("Related Keywords","rank-math")),wp.element.createElement("ul",null,t))}},{key:"getKeywords",value:function(){var e=this;if((0,o.isEmpty)(this.props.caData.data.keywords))return wp.element.createElement("h3",{className:"no-data"},(0,i.__)("There are no recommended Keywords for this researched keyword.","rank-math"));var t=[];return this.contentAiScore={},(0,o.forEach)(this.props.caData.data.keywords,(function(n,r){(0,o.isEmpty)(n)||(e.contentAiScore[r]={},(0,o.forEach)(n,(function(n){var o=e.props.hasCredits?e.getCount(n.keyword,r):n.count,i=O(e.getScore(n.keyword,o,n.average,r)),c=a()("rank-math-tooltip",{show:e.state.type===r});t.push(wp.element.createElement("li",{className:c+" "+i,onClick:function(){return e.setState({selected:n.keyword})},role:"presentation"},wp.element.createElement("strong",{"data-key":n.keyword},n.keyword,wp.element.createElement("span",null,o," / ",n.average)),e.getTooltipContent(n)))})))})),this.updateContentAiScore(),t}},{key:"updateContentAiScore",value:function(){var e=0,t=0;(0,o.forEach)(this.contentAiScore,(function(n,r){var a=Object.values(n),i=(0,o.sum)(a);"title"!==r&&"description"!==r||100!==(0,o.max)(a)||(i=100*a.length),e+=i,t+=a.length})),e/=t,(0,o.isNaN)(e)||this.props.updateAiScore("keywords",e)}},{key:"getScore",value:function(e,t,n,r){var a=t/n*100;return this.contentAiScore[r][e]=a>100?0:a>80?100:a,a}},{key:"getTooltipContent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.props.hasCredits)return this.state.selected===e.keyword?wp.element.createElement("span",{className:"rank-math-tooltip-data"},(0,i.__)("Copied","rank-math")):e.competition||e.cpc||e.search_volume?wp.element.createElement("span",{className:"rank-math-tooltip-data"},wp.element.createElement("span",null,(0,i.__)("Ad Competition:","rank-math")," ",(0,o.round)(100*e.competition)),wp.element.createElement("span",null,(0,i.__)("CPC:","rank-math")," $",(0,o.round)(e.cpc,2)),wp.element.createElement("span",null,(0,i.__)("Volume:","rank-math")," ",(0,o.round)(e.search_volume))):wp.element.createElement("span",{className:"rank-math-tooltip-data"},t?(0,i.__)("Click to copy keyword","rank-math"):(0,i.__)("No data available","rank-math"))}},{key:"getCount",value:function(e,t){var n=this.props.caData.content;if(e=Z.Helpers.removeDiacritics(e).toLowerCase(),"heading"===t){e=e.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&");var r=new RegExp("<h[2-6][^>]*>.*?"+e+".*?</h[2-6]>","g"),a=n.match(r);return(0,o.isNull)(a)?0:a.length}return"title"===t&&(n=this.props.caData.title),"description"===t&&(n=this.props.caData.description),Z.Helpers.cleanTagsOnly(n).split(e).length-1}}],n&&te(t.prototype,n),r&&te(t,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(l.Component),se=(0,h.compose)((0,p.withDispatch)((function(e){return{toggleEditor:function(){e("rank-math").toggleSnippetEditor(!0)}}})))(ce),le=function(){return!((0,o.isNil)(window.wp)||(0,o.isNil)(wp.data)||(0,o.isNil)(wp.data.select("core/editor"))||!window.document.body.classList.contains("block-editor-page")||!(0,o.isFunction)(wp.data.select("core/editor").getEditedPostAttribute))};function ue(e){return ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ue(e)}function me(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function he(e,t){return he=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},he(e,t)}function fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ke(e);if(t){var a=ke(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return de(this,n)}}function de(e,t){if(t&&("object"===ue(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ye(e)}function ye(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ke(e){return ke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ke(e)}var we=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&he(e,t)}(c,e);var t,n,r,a=fe(c);function c(){var e;return me(this,c),(e=a.apply(this,arguments)).state={iconClass:"rm-icon-copy",selected:""},e.setState=e.setState.bind(ye(e)),e.initializeClipboard(e.setState),e}return t=c,(n=[{key:"initializeClipboard",value:function(e){var t=this;"function"==typeof ClipboardJS&&new ClipboardJS(".rank-math-copy-questions, .rank-math-questions-item h3",{text:function(e){if(!(0,o.isNull)(e.getAttribute("data-key")))return e.getAttribute("data-key");if(!le())return document.getElementById("rank-math-ca-questions-data").innerHTML;var n=[];return(0,o.forEach)(t.props.caData.data.related_questions,(function(e){n.push({id:(0,o.uniqueId)("faq-question-"),title:e,content:"",visible:!0})})),"\x3c!-- wp:rank-math/faq-block "+JSON.stringify({questions:n})+' --\x3e<div class="wp-block-rank-math-faq-block"></div>\x3c!-- /wp:rank-math/faq-block --\x3e'}}).on("success",(function(){setTimeout((function(){e({iconClass:"rm-icon-copy"})}),3e3)}))}},{key:"render",value:function(){var e=this,t=[];return(0,o.isEmpty)(this.props.caData.data.related_questions)?wp.element.createElement("h3",{className:"no-data"},(0,i.__)("There are no recommended Questions for this researched keyword.","rank-math")):((0,o.forEach)(this.props.caData.data.related_questions,(function(n){t.push(wp.element.createElement("div",{className:"rank-math-questions-item"},wp.element.createElement("h3",{className:"rank-math-tooltip","data-key":n,onClick:function(){return e.setState({selected:n})},role:"presentation"},n,e.getTooltipContent(n))))})),wp.element.createElement(l.Fragment,null,wp.element.createElement(s.PanelBody,{initialOpen:!0},wp.element.createElement("div",{className:"rank-math-section-heading"},wp.element.createElement("h2",null,(0,i.__)("Related Questions","rank-math"),wp.element.createElement("a",{href:"https://rankmath.com/kb/how-to-use-content-ai/?utm_source=Plugin&utm_medium=Sidebar%20Questions%20KB%20Icon&utm_campaign=WP",rel:"noreferrer",target:"_blank",id:"rank-math-help-icon",title:(0,i.__)("Know more about Questions.","rank-math")},"﹖")),wp.element.createElement(s.Button,{onClick:function(){e.setState({iconClass:"rm-icon-tick"})},className:"rank-math-copy-questions button-secondary rank-math-tooltip left"},wp.element.createElement("i",{className:"rm-icon "+this.state.iconClass}),wp.element.createElement("span",null,(0,i.__)("Copy this data as a FAQ Block.","rank-math")))),wp.element.createElement("span",{className:"components-form-token-field__help"},(0,i.__)("Click on any question to copy it.","rank-math")),wp.element.createElement("div",{id:"rank-math-ca-questions-data"},t))))}},{key:"getTooltipContent",value:function(e){return this.state.selected===e&&wp.element.createElement("span",{className:"rank-math-tooltip-data"},(0,i.__)("Copied","rank-math"))}}])&&pe(t.prototype,n),r&&pe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(l.Component),be=we,ve=function(e){var t=[];return(0,o.isEmpty)(e.caData.data.links)?wp.element.createElement("h3",{className:"no-data"},(0,i.__)("There are no recommended Links for this researched keyword.","rank-math")):((0,o.forEach)(e.caData.data.links,(function(e){return t.push(wp.element.createElement("li",null,wp.element.createElement("a",{href:e,rel:"noreferrer",target:"_blank"},e)))})),wp.element.createElement(l.Fragment,null,wp.element.createElement(s.PanelBody,{initialOpen:!0},wp.element.createElement("div",{className:"rank-math-section-heading"},wp.element.createElement("h2",null,(0,i.__)("Related External Links","rank-math"),wp.element.createElement("a",{href:"https://rankmath.com/kb/how-to-use-content-ai/?utm_source=Plugin&utm_medium=Sidebar%20Links%20KB%20Icon&utm_campaign=WP#links",rel:"noreferrer",target:"_blank",id:"rank-math-help-icon",title:(0,i.__)("Know more about Links.","rank-math")},"﹖")),wp.element.createElement("p",null,(0,i.__)("Use some of these external links in the content area. It is recommended to add","rank-math")," ",wp.element.createElement("a",{href:"https://rankmath.com/kb/about-and-mentions-schema/",rel:"noreferrer",target:"_blank"},(0,i.__)("about or mention Schema.","rank-math")))),wp.element.createElement("ul",null,t))))},ge=function(e){"social"===e&&(0,p.dispatch)("rank-math").toggleSnippetEditor(!0)},_e=function(e){return wp.element.createElement(Y,{className:"rank-math-contentai-tabs",activeClass:"is-active",tabs:[{name:"keywords",title:wp.element.createElement(l.Fragment,null,wp.element.createElement("span",null,(0,i.__)("Keywords","rank-math"))),view:se,className:"rank-math-keywords-tab"},{name:"questions",title:wp.element.createElement(l.Fragment,null,wp.element.createElement("span",null,(0,i.__)("Questions","rank-math"))),view:be,className:"rank-math-questions-tab"},{name:"links",title:wp.element.createElement(l.Fragment,null,wp.element.createElement("span",null,(0,i.__)("Links","rank-math"))),view:ve,className:"rank-math-recommended-links-tab"}],onSelect:ge,data:e},(function(t){return wp.element.createElement("div",{className:"rank-math-contentai-tab-content-"+t.name},(0,l.createElement)(t.view,e))}))},Ee=n(746),Se=function(e){var t=e.tags,n=e.components,r=e.children;return n=n||{},!1===(0,o.isUndefined)(t)&&(t=t.split(",")).forEach((function(e){var t=e;n[e]=wp.element.createElement(t,null)})),(0,Ee.Z)({mixedString:r,components:n})};function Ce(e){return Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ce(e)}function Oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function je(e,t){return je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},je(e,t)}function Ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xe(e);if(t){var a=xe(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Re(this,n)}}function Re(e,t){if(t&&("object"===Ce(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Te(e)}function Te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xe(e){return xe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xe(e)}var Ae=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&je(e,t)}(m,e);var n,r,c,u=Ne(m);function m(){var e;return Oe(this,m),(e=u.apply(this,arguments)).state={keyword:e.props.keyword,showResearch:e.props.keyword!==rankMath.ca_keyword.keyword,country:e.props.country,credits:1,creditsValue:rankMath.ca_credits,loading:!1,loadingCredits:!1},e.setState=e.setState.bind(Te(e)),e}return n=m,(r=[{key:"componentDidMount",value:function(){!this.state.creditsValue&&rankMath.isUserRegistered&&this.updateCredits()}},{key:"updateCredits",value:function(){var e=this;this.setState({loadingCredits:!0}),d()({method:"POST",path:"/rankmath/v1/ca/getCredits"}).catch((function(t){e.setState({loadingCredits:!1}),alert(t.message)})).then((function(t){e.setState({creditsValue:t}),e.setState({loadingCredits:!1})}))}},{key:"render",value:function(){var e=rankMath.isUserRegistered&&(0,o.isNumber)(this.state.credits),t=a()("rank-math-content-ai-data",{loading:this.state.loading,blurred:!e}),n=this.props.data;return(!e&&(0,o.isEmpty)(n)||"show_dummy_data"===n)&&(n=this.getDummyData()),wp.element.createElement(l.Fragment,null,wp.element.createElement(s.PanelBody,{className:"rank-math-content-ai-wrapper",initialOpen:!0},wp.element.createElement(React.Fragment,null,this.getHeader(),!rankMath.isUserRegistered&&this.connectAccountNotice(),rankMath.isUserRegistered&&!e&&this.creditsNotice(e),e&&this.keywordField(),wp.element.createElement("div",{className:t},wp.element.createElement("span",{className:"loader-text"},wp.element.createElement("span",null,(0,i.__)("Fetching Search Results","rank-math")),wp.element.createElement("span",null,(0,i.__)("Analysing Your Competitors","rank-math")),wp.element.createElement("span",null,(0,i.__)("Crunching the Numbers","rank-math")),wp.element.createElement("span",null,(0,i.__)("Cooking a Personalized SEO Plan","rank-math")),wp.element.createElement("span",null,(0,i.__)("Final Touches to the SEO Recommendations","rank-math"))),(0,o.isString)(n)&&wp.element.createElement("h3",{className:"no-data"},n),!(0,o.isEmpty)(n)&&!(0,o.isString)(n)&&wp.element.createElement("div",null,wp.element.createElement("h3",{className:"rank-math-ca-section-title"},(0,i.__)("Content AI","rank-math"),wp.element.createElement("span",null,(0,i.__)("New!","rank-math")),wp.element.createElement("a",{href:"https://rankmath.com/kb/how-to-use-content-ai/?utm_source=Plugin&utm_medium=Sidebar%20KB%20Icon&utm_campaign=WP",rel:"noreferrer",target:"_blank",id:"rank-math-help-icon",title:(0,i.__)("Content AI Knowledge Base.","rank-math")},"﹖")),wp.element.createElement(C,null),wp.element.createElement(D,{recommendations:n.recommendations,hasCredits:e,content:this.props.content,researcher:this.props.researcher,updateAiScore:this.props.updateAiScore,hasThumbnail:this.props.hasThumbnail}),wp.element.createElement(_e,{caData:this.props,updateAiScore:this.props.updateAiScore,hasCredits:e}))))))}},{key:"getDummyData",value:function(){return{keywords:{content:{"rank math":{keyword:"rank math",average:17,count:12},"rank math vs yoast seo":{keyword:"rank math vs yoast seo",average:1,count:1},"what is rank math":{keyword:"what is rank math",average:1,count:1},"rank math schema":{keyword:"rank math schema",average:1,count:1},"rank math configuration":{keyword:"rank math configuration",average:1,count:1},"rank math pro version":{keyword:"rank math pro version",average:1,count:2},"rank math comparison":{keyword:"rank math comparison",average:1,count:1},"rank math for seo":{keyword:"rank math for seo",average:1,count:1},"seo by rank math":{keyword:"seo by rank math",average:1,count:0}}},related_keywords:["rank math plugin","rank math pricing","rank math vs yoast","rank math review","rank math premium","how to use rank math","rank math training","rank math woocommerce","wordpress seo plugin"],recommendations:{wordCount:1829,linkCount:{total:16},headingCount:{total:9},mediaCount:{total:18}}}}},{key:"getHeader",value:function(){var e=this;return wp.element.createElement("div",{className:"rank-math-ca-top-section"},wp.element.createElement(s.Button,{onClick:function(){return t()(".rank-math-general-tab").trigger("click")}},wp.element.createElement("i",{className:"dashicons dashicons-arrow-left-alt"}),(0,i.__)("Back","rank-math")),wp.element.createElement(s.SelectControl,{value:this.state.country,onChange:function(t){return e.setState({country:t,showResearch:!0})},options:rankMath.countries}))}},{key:"keywordField",value:function(){var e=this,t=a()("rank-math-tooltip update-credits",{loading:this.state.loadingCredits});return wp.element.createElement("div",{className:"rank-math-ca-keywords-wrapper"},wp.element.createElement("div",{className:"rank-math-ca-credits-wrapper"},wp.element.createElement(s.TextControl,{label:(0,i.__)("Focus Keyword","rank-math"),value:this.state.keyword,onChange:function(t){return e.setState({keyword:t,showResearch:!0})},onKeyDown:function(e){"Enter"===e.key&&e.preventDefault()},help:wp.element.createElement(React.Fragment,null,(0,i.__)("Upgrade to buy more credits from ","rank-math"),wp.element.createElement("a",{href:"https://rankmath.com/content-ai/?utm_source=Plugin&utm_medium=Sidebar%20Upgrade%20Text&utm_campaign=WP#pricing-tables",rel:"noreferrer",target:"_blank",title:(0,i.__)("Content AI Pricing.","rank-math")},(0,i.__)("here.","rank-math"))),placeholder:(0,i.__)("Suggested length 2-3 Words","rank-math")}),wp.element.createElement("div",{className:"help-text"},(0,i.__)("To learn how to use it","rank-math")," ",wp.element.createElement("a",{href:"https://rankmath.com/kb/how-to-use-content-ai/?utm_source=Plugin&utm_medium=Content%20AI%20Sidebar%20KB%20Link&utm_campaign=WP",target:"_blank",rel:"noreferrer"},(0,i.__)("Click here","rank-math"))),!this.state.showResearch&&!this.state.loading&&!(0,o.isEmpty)(this.props.data)&&wp.element.createElement(s.Button,{className:"rank-math-ca-force-update rank-math-tooltip left",onClick:function(){return e.props.researchKeyword(e.state,e.setState,!0)}},wp.element.createElement("i",{className:"dashicons dashicons-image-rotate"}),wp.element.createElement("span",null,(0,i.__)("Refresh will use one new credit.","rank-math"))),wp.element.createElement("div",{className:"rank-math-ca-credits"},wp.element.createElement(s.Button,{className:t,onClick:function(){return e.updateCredits()}},wp.element.createElement("i",{className:"dashicons dashicons-image-rotate"}),wp.element.createElement("span",null,(0,i.__)("Click to refresh the available credits.","rank-math"))),wp.element.createElement("span",null,(0,i.__)("Credits","rank-math")),wp.element.createElement("a",{href:"https://rankmath.com/kb/how-to-use-content-ai/?utm_source=Plugin&utm_medium=Sidebar%20Credits%20Tooltip%20Icon&utm_campaign=WP#credits-usage",rel:"noreferrer",target:"_blank",id:"rank-math-help-icon",title:(0,i.__)("Know more about credits.","rank-math")},"﹖"),wp.element.createElement("strong",null,this.state.creditsValue))),this.state.showResearch&&wp.element.createElement(s.Button,{className:"is-primary",onClick:function(){return e.props.researchKeyword(e.state,e.setState)},title:(0,i.__)("One credit will be used.","rank-math"),disabled:!this.state.keyword},(0,i.__)("Research","rank-math")))}},{key:"connectAccountNotice",value:function(){return wp.element.createElement("div",{className:"rank-math-ca-warning"},wp.element.createElement("h3",null,(0,i.__)("Content AI","rank-math")),wp.element.createElement("p",null,(0,i.__)("Please connect your account to use this feature.","rank-math")),wp.element.createElement(s.Button,{href:rankMath.connectSiteUrl,className:"is-primary"},(0,i.__)("Connect Now","rank-math")))}},{key:"creditsNotice",value:function(){return wp.element.createElement("div",{className:"rank-math-ca-warning"},wp.element.createElement("h3",null,(0,i.__)("Content AI","rank-math")),"site_limit_reached"===this.state.credits&&wp.element.createElement("p",null,wp.element.createElement(Se,{components:{link1:wp.element.createElement("a",{href:"https://rankmath.com/my-account/?utm_source=Plugin&utm_medium=Sidebar%20No%20Credits&utm_campaign=WP",target:"_blank",rel:"noopener noreferrer"}),link2:wp.element.createElement("a",{href:"https://rankmath.com/content-ai/?utm_source=Plugin&utm_medium=Sidebar%20No%20Credits&utm_campaign=WP#pricing-tables",target:"_blank",rel:"noopener noreferrer"})}},(0,i.__)("All credits assigned to this site are used. Please add more credits from {{link1}}My Account{{/link1}} Page or {{link2}}upgrade your plan{{/link2}}.","rank-math"))),"account_limit_reached"===this.state.credits&&wp.element.createElement(React.Fragment,null,wp.element.createElement("p",null,(0,i.__)("You don't have any credits left.","rank-math")),wp.element.createElement(s.Button,{href:"https://rankmath.com/content-ai/?utm_source=Plugin&utm_medium=Sidebar%20No%20Credits&utm_campaign=WP#pricing-tables",target:"_blank",rel:"noreferrer",className:"is-primary"},(0,i.__)("Get More Credits","rank-math"))))}}])&&Pe(n.prototype,r),c&&Pe(n,c),Object.defineProperty(n,"prototype",{writable:!1}),m}(l.Component),Ie=(0,h.compose)((0,p.withSelect)((function(e){var t=rankMathEditor.assessor.analyzer.researcher,n=t.paper;return{data:e("rank-math").getKeywordsData(),keyword:(0,o.get)(rankMath.ca_keyword,"keyword",e("rank-math").getKeywords().split(",")[0]),country:(0,o.get)(rankMath.ca_keyword,"country",rankMath.contentAiCountry),researcher:t,content:(0,o.isUndefined)(n)?"":n.getTextLower(),title:(0,o.isUndefined)(n)?"":n.getTitle().toLowerCase(),description:(0,o.isUndefined)(n)?"":n.getDescription().toLowerCase(),hasThumbnail:(0,o.isUndefined)(n)?"":n.hasThumbnail(),score:e("rank-math").getContentAIScore()}})),(0,p.withDispatch)((function(e,t){return{researchKeyword:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.force_update=r,t.objectID=rankMath.objectID,t.objectType=rankMath.objectType,n({showResearch:!1,loading:!0}),d()({method:"POST",path:"/rankmath/v1/ca/researchKeyword",data:t}).catch((function(e){n({loading:!1,showResearch:!0}),alert(e.message)})).then((function(t){n({loading:!1}),e("rank-math").updateKeywordsData(t.data),(0,o.isNull)(t.credits)||(0,o.isUndefined)(t.credits)||n({credits:t.credits,creditsValue:(0,o.isNumber)(t.credits)?t.credits:0}),(0,c.doAction)("rank_math_content_ai_changed",t.keyword)}))},updateAiScore:function(n,r){var a=t.score;a[n]=(0,o.round)(r,2),e("rank-math").updateAIScore(a)}}})))(Ae);function Me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var De=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),rankMath.isUserRegistered&&(this.init=this.init.bind(this),this.contentLength=this.contentLength.bind(this),this.contentLengthBoundary=this.contentLengthBoundary.bind(this),this.keywordDensity=this.keywordDensity.bind(this),this.removeTests=this.removeTests.bind(this),this.researchesTests=rankMath.assessor.researchesTests,this.ca_keyword=rankMath.ca_keyword.keyword,(0,c.addAction)("rank_math_loaded","rank-math",this.init),(0,c.addAction)("rank_math_keyword_refresh","rank-math",this.init),(0,c.addAction)("rank_math_content_ai_changed","rank-math",this.init))}var t,n,r;return t=e,(n=[{key:"init",value:function(e){e&&(this.ca_keyword=e),this.keyword=rankMathEditor.assessor.getPrimaryKeyword(),this.data=(0,p.select)("rank-math").getKeywordsData(),(0,o.isEmpty)(this.data)||(this.filters(),this.removeTests(),e&&rankMathEditor.refresh("content"))}},{key:"removeTests",value:function(){if(this.ca_keyword===this.keyword){var e=this.data.recommendations;rankMath.assessor.researchesTests=(0,o.filter)(rankMath.assessor.researchesTests,(function(t){return!(!e.mediaCount&&"contentHasAssets"===t||!e.linkCount.internal&&"linksHasInternal"===t||!(e.linkCount.external||"linksHasExternals"!==t&&"linksNotAllExternals"!==t))}))}else rankMath.assessor.researchesTests=this.researchesTests}},{key:"filters",value:function(){(0,c.addFilter)("rankMath_analysis_contentLength","rank-math",this.contentLength),(0,c.addFilter)("rankMath_analysis_contentLength_boundaries","rank-math",this.contentLengthBoundary),(0,c.addFilter)("rankMath_analysis_keywordDensity","rank-math",this.keywordDensity)}},{key:"contentLength",value:function(e){if(this.ca_keyword!==this.keyword)return e;var t=this.data.recommendations.wordCount,n=(0,o.ceil)(150*t/100);return{hasScore:e.hasScore,failed:(0,i.sprintf)((0,i.__)("Content is %1$s words long. Consider using at least %2$s words.","rank-math"),"%1$d",t),tooltipText:(0,i.sprintf)((0,i.__)("Minimum recommended content length should be %1$d words.","rank-math"),t),emptyContent:(0,i.sprintf)((0,i.__)("Content should be %1$s long.","rank-math"),'<a href="https://s.rankmath.com/100contentlength" target="_blank">'+t+" - "+n+(0,i.__)(" words","rank-math")+"</a>")}}},{key:"contentLengthBoundary",value:function(e){if(this.ca_keyword!==this.keyword)return e;var t=this.data.recommendations.wordCount,n=(0,o.ceil)(150*t/100);return{recommended:{boundary:n,score:8},belowRecommended:{boundary:(0,o.ceil)(n/2),score:5},low:{boundary:t,score:2}}}},{key:"keywordDensity",value:function(e,t){if((0,o.isEmpty)(this.data.keywords.content)||(0,o.isEmpty)(this.data.keywords.content[this.keyword]))return e;var n=t/this.data.keywords.content[this.keyword].average*100;return n>80?1.1:100<n?2.5:80<n?1.1:50<n?.8:.5}}])&&Me(t.prototype,n),r&&Me(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Be=function(){var e=a()("button-secondary rank-math-content-ai",{"is-new":!rankMath.ca_viewed});return wp.element.createElement(s.Button,{className:e,onClick:function(){return t()(".rank-math-content-ai-tab").trigger("click")}},wp.element.createElement("i",{className:"rm-icon rm-icon-target"}),(0,i.__)("Content AI","rank-math"))};(0,c.addFilter)("rankMath.analytics.contentAI","rank-math",(function(){return Be})),(0,c.addAction)("rank_math_loaded","rank-math",(function(){(0,c.addFilter)("rank_math_sidebar_tabs","rank-math",(function(e){return e.push({name:"contentAI",title:wp.element.createElement(l.Fragment,null,wp.element.createElement("i",{className:"rm-icon rm-icon-target"}),wp.element.createElement("span",null,(0,i.__)("Content AI","rank-math"))),view:Ie,className:"rank-math-content-ai-tab hidden is-active"}),e}));var e=document.getElementById("cmb2-metabox-rank_math_metabox_content_ai");e&&setTimeout((function(){(0,l.render)((0,l.createElement)(Ie),e)}),1e3),"gutenberg"===rankMath.currentEditor&&(0,u.registerPlugin)("rank-math-content-ai-box",{render:function(){var e=(0,p.select)("rank-math").getContentAIScore();return!(!(0,o.isEmpty)(e)||!(0,o.isEmpty)(rankMath.ca_keyword))&&wp.element.createElement(m.PluginPrePublishPanel,{title:(0,i.__)("Content AI","rank-math"),icon:"rm-icon rm-icon-target",initialOpen:"true",className:"rank-math-content-ai-box"},wp.element.createElement("p",null,(0,i.__)("Improve your content with a personal Content AI.","rank-math")),wp.element.createElement(s.Button,{className:"button-primary",onClick:function(){t()(".editor-post-publish-panel__header-cancel-button button").trigger("click"),t()(".rank-math-toolbar-score").parent().hasClass("is-pressed")||t()(".rank-math-toolbar-score").trigger("click"),setTimeout((function(){t()(".rank-math-content-ai-tab").trigger("click")}),100)}},(0,i.__)("Improve Now","rank-math")))}}),"classic"!==rankMath.currentEditor&&t()(document).on("click",".rank-math-open-contentai",(function(e){return e.preventDefault(),t()(".rank-math-content-ai-tab").trigger("click"),!1})),new De}))}()}();
@mixin option-separator() {
	border-bottom: 1px solid $gray-lightest;
}

.components-custom-select-control {
	.css-f0d2mi.css-f0d2mi.css-f0d2mi {
		@include input-min-height();
		@include input-min-width();
		@include font-size-small();
	}

	.components-custom-select-control__button {
		&[aria-expanded="true"] {
			+ .components-input-control__suffix {
				svg {
					transform: rotate(180deg);
				}
			}
		}
	}

	.components-custom-select-control__menu {
		box-shadow: 0px 2px 4px $gray-lighter;
		border-color: $blue;
		margin: 0;
		border-top: 0;
		min-width: 99%;

		.components-custom-select-control__item {
			&-icon {
				display: none;
			}

			&.is-highlighted {
				background-color: $blue-lightest;
				color: $blue;
				cursor: pointer;
			}
		}
	}

	.components-custom-select-control__label {
		@include center-float-vertically();
		@include font-size-small();
		left: 15px;
		z-index: 50;
		text-transform: inherit;
		margin-bottom: 0;
		font-weight: normal;
	}

	&.with-label {
		.components-custom-select-control__button {
			text-align: right;
		}
		
		.components-custom-select-control__item {
			justify-content: end;
		}
	}

	&.is-disabled {
		.components-input-control__container {
			@include disabled-style();
		}

		.components-custom-select-control__label {
			opacity: 0.5;
		}
	}

	// Select Control with Search
	&.search-select-control {
		width: 35rem;

		.components-custom-select-control__button {
			&[aria-expanded="true"] {
				+ .components-input-control__suffix {
					.components-input-control-suffix-wrapper {
						background-color: $blue-light;
					}
				}
			}
		}

		.components-input-control__suffix {
			.components-input-control-suffix-wrapper {
				right: 4px;
				padding-right: 4px;
				background-color: $gray-lightest;

				.css-18q9qlf {
					padding: 5px;
				}
			}
		}

		.components-custom-select-control__menu {
			.components-search-control {
				.components-base-control__field {
					@include option-separator();
					background-color: $white;
					padding: 8px 16px;

					.components-search-control__input {
						@include border-default();
						background-color: $white;

						&:focus {
							box-shadow: none;
							outline: none;
						}
					}

					.components-search-control__icon {
						svg {
							transform: rotate(-90deg);
							opacity: 0.5;
						}
					}
				}
			}
			
			.components-custom-select-control__item {
				@include option-separator();
				margin-bottom: 0px;

				.option__container {
					.option__heading {
						@include flex-align();
						justify-content: space-between;
						margin-bottom: 8px;

						&-title,
						&-subtitle {
							@include font-size-small();
							margin: 0px;
						}

						&-title {
							font-weight: 500;
						}

						&-subtitle {
							background-color: $gray-mono;
						}
					}

					.option__description {
						color: $gray;
						margin: 0;
					}
				}

				&.is-highlighted {
					.option__heading {
						&-title {
							color: $blue; 
						}
						&-subtitle {
							background-color: $blue-lightest;
							color: $blue; 
						}
					}

					.option__description {
						color: $gray-darkest;
					}
				}
			}
		}

		&.is-disabled {
			.components-input-control__suffix {
				.components-input-control-suffix-wrapper {	
					background-color: $gray-lighter;
					
					svg {
						opacity: 0.4;
					}
				}
			}
		}
	}
}


.search-select {
	position: relative;
	width: 35rem;

	.search-select__button {
		&.components-button {
			@include font-size-small();
			@include input-min-height();
			@include flex-align();
			justify-content: space-between;
			box-shadow: 0 0 0 1px $gray-light;
			width: 100%;
			background: $white;
			color: #2c3338;
			padding-right: 4px;

			&:hover:not(:disabled) {
				color: #2c3338;
				box-shadow: 0 0 0 1px $gray-light;
				background-color: $white;
			}

			&:focus,
			&:focus:hover:not(:disabled) {
				box-shadow: 0 0 0 1.5px $blue;
			}
		}

		&-icon {
			background-color: $gray-lightest;
			height: 30px;
			width: 28px;
			border-radius: 1px;
		}

		&[aria-expanded="true"] {
			&.components-button {
				box-shadow: 0 0 0 1.5px $blue;

				&:hover:not(:disabled) {
					box-shadow: 0 0 0 1.5px $blue;
				}
			}

			.search-select__button-icon {
				background-color: $blue-light;
			}
		}
	}

	.search-select__menu {
		box-shadow: 0px 2px 4px $gray-lighter;
		border: 1px solid $blue;
		background-color: $white;
		position: absolute;
		top: 103%;
		left: -2px;
		right: -1px;
		margin: 0;
		z-index: 100000;
		border-radius: 3px;
		height: 25rem;
  	overflow: auto;

		&-search {
			.components-base-control__field {
				@include option-separator();
				background-color: $white;
				padding: 15px 16px;
				margin: 0;

				.components-search-control__input {
					@include border-default();
					background-color: $white;
					height: 40px;

					&:focus {
						@include border-default();
						box-shadow: none;
						outline: none;
					}
				}

				.components-search-control__icon {
					.components-button.has-icon:not(.has-text):focus {
						box-shadow: none;
					}

					svg {
						transform: rotate(-90deg);
						opacity: 0.5;
					}
				}
			}
		}

		&-item {
			@include option-separator();
			padding: 15px;
			margin: 0;
			cursor: pointer;

			.option__container {
				.option__heading {
					@include flex-align();
					justify-content: space-between;
					margin-bottom: 8px;

					&-title,
					&-subtitle {
						@include font-size-small();
						margin: 0px;
					}

					&-title {
						font-weight: 500;
					}

					&-subtitle {
						background-color: $gray-mono;
					}
				}

				.option__description {
					color: $gray;
					margin: 0;
				}
			}

			&:hover{
				background-color: rgba($blue, 3%);

				.option__heading {
					&-title {
						color: $blue; 
					}
					&-subtitle {
						background-color: $blue-lightest;
						color: $blue; 
					}
				}

				.option__description {
					color: $gray-darkest;
				}
			}
		}
	}
}

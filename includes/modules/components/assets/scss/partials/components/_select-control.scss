@mixin option-separator() {
	border-bottom: 1px solid $gray-lightest;
}

.components-custom-select-control {
	.css-f0d2mi.css-f0d2mi.css-f0d2mi {
		@include input-min-height();
		@include input-min-width();
		@include font-size-small();
	}

	&__button {
		.components-input-control__backdrop {
			@include border-light();
		}

		&[aria-expanded="true"] {
			+ .components-input-control__suffix {
				svg {
					transform: rotate(180deg);
				}
			}
		}
	}

	&__menu {
		box-shadow: 0px 2px 4px $gray-lighter;
		border-color: $blue;
		margin: 0;
		border-top: 0;
		min-width: 99%;

		.components-custom-select-control__item {
			&-icon {
				display: none;
			}

			&.is-highlighted {
				background-color: $blue-lightest;
				color: $blue;
				cursor: pointer;
			}
		}
	}

	&.with-label {
		.components-custom-select-control__label {
			@include center-float-vertically();
			@include font-size-small();
			left: 15px;
			z-index: 50;
			text-transform: inherit;
			margin-bottom: 0;
			font-weight: normal;
		}

		.components-custom-select-control__button {
			text-align: right;
		}
		
		.components-custom-select-control__item {
			justify-content: end;
		}
	}

	&.is-disabled {
		.components-input-control__container {
			.components-custom-select-control__button {
				@include disabled-style();
			}

			.components-input-control__backdrop {
				@include disabled-opacity();
				@include disabled-border-color();
			}
		}

		.components-input-control__suffix,
		.components-custom-select-control__label {
			opacity: 0.2;
		}
	}

	// Select Control with Search
	&.select-with-search {
		width: 35rem;

		.components-custom-select-control__label {
			display: none;
		}

		.components-custom-select-control__button {
			&[aria-expanded="true"] {
				+ .components-input-control__suffix {
					.components-input-control-suffix-wrapper {
						background-color: $blue-light;
					}
				}
			}
		}

		.components-input-control__suffix {
			.components-input-control-suffix-wrapper {
				right: 4px;
				padding-right: 4px;
				background-color: $gray-lightest;

				.css-18q9qlf {
					padding: 5px;
				}
			}
		}

		.components-custom-select-control__menu {
			.components-search-control {
				.components-base-control__field {
					@include option-separator();
					background-color: $white;
					padding: 15px 16px;
					margin-bottom: 0;

					.components-search-control__input {
						@include border-default();
						background-color: $white;
						height: 40px;

						&:focus {
							box-shadow: none;
							outline: none;
						}
					}

					.components-search-control__icon {
						svg {
							transform: rotate(-90deg);
							opacity: 0.5;
						}
					}
				}
			}
			
			.components-custom-select-control__item {
				@include option-separator();
				margin-bottom: 0px;
				padding: 10px 16px;

				.option__container {
					.option__heading {
						@include flex-align();
						justify-content: space-between;
						margin-bottom: 3px;

						&-title,
						&-subtitle {
							@include font-size-small();
							margin: 0px;
						}

						&-title {
							font-weight: normal;
						}

						&-subtitle {
							background-color: $gray-mono;
						}
					}

					.option__description {
						color: $gray;
						margin: 0;
						margin-bottom: 4px;
						font-size: 12px;
					}
				}

				&.is-highlighted {
					.option__heading {
						&-title {
							color: $blue; 
						}
						&-subtitle {
							background-color: $blue-lightest;
							color: $blue; 
						}
					}

					.option__description {
						color: $gray-darkest;
					}
				}
			}
		}

		&.is-disabled {
			.components-input-control__suffix {
				.components-input-control-suffix-wrapper {	
					background-color: $gray-lighter;
				}
			}
		}
	}
}

$select-with-search-btn-color: #2c3338;

.select-with-search {
	position: relative;
	width: 35rem;

	&__button {
		&.components-button {
			&.is-secondary {
				@include font-size-small();
				@include input-min-height();
				@include flex-align();
				@include border-default();
				justify-content: space-between;
				width: 100%;
				background: $white;
				color: $select-with-search-btn-color;
				padding-right: 4px;
				border-radius: 2px;
				box-shadow: none;

				&:hover:not(:disabled) {
					color: $select-with-search-btn-color;
					border: 1px solid $gray-light;
					background-color: $white;
					box-shadow: none;
				}
				
				&:focus,
				&:focus:hover:not(:disabled) {
					box-shadow: inset 0 0 0 1px $blue;
					border-color: $blue;
				}
			}
		}

		&-icon {
			background-color: $gray-lightest;
			height: 30px;
			width: 28px;
			border-radius: 1px;
		}

		&[aria-expanded="true"] {
			&.components-button {
				box-shadow: inset 0 0 0 1px $blue;
				border-color: $blue;

				&:hover:not(:disabled) {
					box-shadow: inset 0 0 0 1px $blue;
					border-color: $blue;
				}
			}

			.select-with-search__button-icon {
				background-color: $blue-light;
			}
		}
	}

	&__menu {
		max-height: 25rem;
		box-shadow: 0px 2px 4px $gray-lighter;
		border: 1px solid $blue;
		background-color: $white;
		position: absolute;
		top: 98%;
		left: 0;
		right: 0;
		margin: 0;
		z-index: 100000;
		border-radius: 3px;
  	overflow: auto;

		&-search {
			&.components-search-control {
				.components-base-control__field {
					@include option-separator();
					background-color: $white;
					padding: 15px 16px;
					margin: 0;

					.components-search-control__input {
						@include border-default();
						background-color: $white;
						height: 40px;

						&:focus {
							@include border-default();
							box-shadow: none;
							outline: none;
						}
					}

					.components-search-control__icon {
						.components-button.has-icon:not(.has-text):focus {
							box-shadow: none;
						}

						svg {
							transform: rotate(-90deg);
							opacity: 0.5;
						}
					}
				}
			}
		}

		&-item {
			@include option-separator();
			padding: 15px;
			margin: 0;
			cursor: pointer;

			.option__container {
				.option__heading {
					@include flex-align();
					justify-content: space-between;
					margin-bottom: 7px;

					&-title,
					&-subtitle {
						@include font-size-small();
						margin: 0px;
					}

					&-title {
						font-weight: normal;
					}

					&-subtitle {
						background-color: $gray-mono;
					}
				}

				.option__description {
					color: $gray;
					font-size: 12px;
					margin: 0;
				}
			}

			&:hover{
				background-color: rgba($blue, 3%);

				.option__heading {
					&-title {
						color: $blue; 
					}
					&-subtitle {
						background-color: $blue-lightest;
						color: $blue; 
					}
				}

				.option__description {
					color: $gray-darkest;
				}
			}
		}
	}

	&[aria-disabled="true"] {
		.select-with-search__button {
			&.components-button {
				@include disabled-style();
				@include disabled-border-color();
			}

			&-icon {
				background-color: $gray-lighter;
			}
		}
	}
}
